<!DOCTYPE html>
<html>
<head>
  <title>Dolly Eatery</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(120deg, #ffe259, #ffa751);
      margin: 0;
      min-height: 100vh;
    }

    .container {
      max-width: 420px;
      margin: 40px auto;
      background: white;
      padding: 25px;
      border-radius: 12px;
    }

    h1, h2 {
      text-align: center;
      color: #6a0572;
    }

    input, button, select {
      width: 100%;
      padding: 15px;
      font-size: 16px;
      margin: 10px 0;
    }

    button {
      background: #6a0572;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .hidden {
      display: none;
    }

    .food {
      padding: 12px;
      border: 1px solid #ccc;
      margin: 6px 0;
      cursor: pointer;
    }

    .food.selected {
      background: #cdb4db;
    }

    .wallet {
      background: #80ed99;
      padding: 10px;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

<div class="container" id="auth">
  <h1>Dolly Eatery</h1>
  <h2>Login / Sign Up</h2>

  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">

  <button onclick="signup()">Sign Up</button>
  <button onclick="login()">Login</button>
</div>

<div class="container hidden" id="foodPage">
  <div class="wallet">Wallet Balance: â‚¦<span id="balance">0</span></div>
  <h2>Select Food</h2>

  <div class="food" onclick="toggleFood(this, 3000)">Burger â‚¦3,000</div>
  <div class="food" onclick="toggleFood(this, 2000)">Indomie â‚¦2,000</div>
  <div class="food" onclick="toggleFood(this, 5000)">Rice & Chicken â‚¦5,000</div>
  <div class="food" onclick="toggleFood(this, 1500)">Plantain â‚¦1,500</div>

  <button onclick="goAddress()">Next</button>
</div>

<div class="container hidden" id="addressPage">
  <h2>Delivery Address</h2>
  <input id="address" placeholder="Enter your home address">
  <select id="payment" onchange="showPayment()">
    <option value="">Select Payment</option>
    <option value="transfer">Bank Transfer</option>
    <option value="atm">ATM Card</option>
  </select>

  <div id="transferBox" class="hidden">
    <p><b>Transfer to:</b></p>
    <p>Bank: Demo Bank</p>
    <p>Account No: 1234567890</p>
  </div>

  <div id="atmBox" class="hidden">
    <input placeholder="Card Number">
    <input placeholder="Expiry Date">
    <input placeholder="CVV">
  </div>

  <button onclick="submitOrder()">Submit Order</button>
</div>

<div class="container hidden" id="success">
  <h2>Order Successful ðŸŽ‰</h2>
  <p>Your food will arrive in 1â€“2 hours.</p>
</div>

<script>
let total = 0;
let currentUser = "";

function signup(){
  let emailVal = email.value;
  let passVal = password.value;

  if(!emailVal || !passVal){
    alert("Fill all fields");
    return;
  }

  if(localStorage.getItem(emailVal)){
    alert("Email already registered");
    return;
  }

  let user = {
    password: passVal,
    balance: 50000
  };

  localStorage.setItem(emailVal, JSON.stringify(user));
  login();
}

function login(){
  let emailVal = email.value;
  let passVal = password.value;

  let user = JSON.parse(localStorage.getItem(emailVal));
  if(!user){
    alert("Account not found");
    return;
  }

  if(user.password !== passVal){
    alert("Wrong password");
    return;
  }

  currentUser = emailVal;
  balance.innerText = user.balance;
  auth.classList.add("hidden");
  foodPage.classList.remove("hidden");
}

function toggleFood(el, price){
  el.classList.toggle("selected");
  total += el.classList.contains("selected") ? price : -price;
}

function goAddress(){
  if(total <= 0){
    alert("Select food");
    return;
  }
  foodPage.classList.add("hidden");
  addressPage.classList.remove("hidden");
}

function showPayment(){
  transferBox.classList.add("hidden");
  atmBox.classList.add("hidden");

  if(payment.value === "transfer") transferBox.classList.remove("hidden");
  if(payment.value === "atm") atmBox.classList.remove("hidden");
}

function submitOrder(){
  let addr = address.value.trim();
  let pay = payment.value;

  if(addr.length < 10){
    alert("Invalid address");
    return;
  }

  let user = JSON.parse(localStorage.getItem(currentUser));
  if(user.balance < total){
    alert("Insufficient wallet balance");
    return;
  }

  user.balance -= total;
  localStorage.setItem(currentUser, JSON.stringify(user));

  addressPage.classList.add("hidden");
  success.classList.remove("hidden");
}
</script>

</body>
</html>
